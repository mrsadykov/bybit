# Донастройка стратегии RSI+EMA

Краткая инструкция по включению «глубокой перепроданности» и опциональной подстройке периодов по ботам.

---

## 1. Включить «глубокую перепроданность» (рекомендуется)

При **очень низком RSI** (ниже порога) стратегия разрешает BUY, даже если цена чуть **ниже** EMA (в обычном режиме BUY только при цена ≥ EMA).

**На сервере** в `.env` добавь (или раскомментируй):

```env
TRADING_RSI_DEEP_OVERSOLD=28
TRADING_EMA_TOLERANCE_DEEP_PERCENT=2
```

- **TRADING_RSI_DEEP_OVERSOLD=28** — при RSI < 28 считаем «глубокой перепроданностью».
- **TRADING_EMA_TOLERANCE_DEEP_PERCENT=2** — в этом случае разрешаем цену до **2% ниже** EMA для BUY.

После изменений:

```bash
php artisan config:clear
```

Эффект: больше входов по SOL/BNB, когда RSI очень низкий (16–28), а цена чуть под EMA. Риск: больше входов в даунтренде — наблюдай 1–2 недели. При желании можно сначала поставить 3% или RSI 25.

---

## 2. Опционально: период EMA по боту (SOL/BNB)

Более длинная EMA (15–20) даёт меньше ложных входов на волатильных парах.

**Через tinker** (подставь свои ID ботов):

```bash
php artisan tinker
```

```php
// SOLUSDT — бот #3 (проверь ID в админке)
$bot = \App\Models\TradingBot::find(3);
$bot->ema_period = 15;
$bot->save();

// BNBUSDT — бот #4
$bot = \App\Models\TradingBot::find(4);
$bot->ema_period = 15;
$bot->save();
```

Или через веб: **Trading Bots** → редактирование бота → поле **EMA period** (если есть в форме).

---

## 3. Пороги RSI по боту (по желанию)

В форме редактирования бота можно задать:

- **RSI buy threshold** — например 35–38 (строже вход).
- **RSI sell threshold** — например 55–58 (раньше выход).

Дефолт 40/60; для убыточных пар можно попробовать 35/58.

---

## 4. Проверка

После включения глубокой перепроданности в логах Telegram при низком RSI и цене чуть ниже EMA может появиться **BUY** вместо **HOLD**. Следи за сделками 1–2 недели, при необходимости уменьши `TRADING_EMA_TOLERANCE_DEEP_PERCENT` (например до 1) или отключи переменные.
