# Альтернативные биржи для торговых ботов

## Проблема с Bybit

Bybit API имеет ограничения:
- История ордеров доступна только за последние 7 дней
- Отмененные ордера старше 7 дней недоступны через API
- Это затрудняет восстановление полной истории торгов

## Альтернативные биржи (доступные для россиян)

### 1. **Binance** ⭐ Рекомендуется

**Плюсы:**
- ✅ Лучшая API документация
- ✅ Более длительная история ордеров (до 3 месяцев)
- ✅ Большая ликвидность
- ✅ Доступна для россиян (с ограничениями)
- ✅ Официальная библиотека на PHP: `binance/binance-api-php`

**Минусы:**
- ⚠️ Санкции могут ограничивать некоторые функции
- ⚠️ Нужна верификация для полного доступа

**API документация:** https://binance-docs.github.io/apidocs/spot/en/

**Библиотека PHP:** 
```bash
composer require binance/binance-api-php
```

### 2. **OKX** (бывший OKEx)

**Плюсы:**
- ✅ Хорошая API документация
- ✅ Доступна для россиян
- ✅ История ордеров до 3 месяцев
- ✅ Активная разработка API

**Минусы:**
- ⚠️ Меньше документации на русском

**API документация:** https://www.okx.com/docs-v5/

### 3. **Gate.io**

**Плюсы:**
- ✅ Доступна для россиян
- ✅ Хорошая API документация
- ✅ История до 90 дней

**Минусы:**
- ⚠️ Меньше ликвидности чем Binance/Bybit

**API документация:** https://www.gate.io/docs/developers/apiv4/

### 4. **Huobi** (HTX)

**Плюсы:**
- ✅ Доступна для россиян
- ✅ История ордеров до 3 месяцев

**Минусы:**
- ⚠️ Меньше документации
- ⚠️ API может быть менее стабильным

## Рекомендации

### Если переходить на другую биржу:

1. **Binance** - лучший вариант по документации и функциональности
2. **OKX** - хорошая альтернатива с качественным API
3. **Gate.io** - если нужна максимальная доступность

### Архитектура проекта

Текущая архитектура уже поддерживает абстракцию:
- `ExchangeAccount` - модель для разных бирж
- `BybitService` - можно создать `BinanceService`, `OkxService` и т.д.
- Стратегии и индикаторы - независимы от биржи

### План миграции (если нужно):

1. Создать новый Service класс (например `BinanceService`)
2. Реализовать те же методы (`getPrice`, `getBalance`, `placeMarketBuy` и т.д.)
3. Обновить конфигурацию для выбора биржи
4. Мигрировать балансы и позиции

## Альтернативное решение (остаемся на Bybit)

Если не хотите менять биржу:

1. **Использовать синхронизацию с балансом** (`position:sync-from-balance`)
2. **Экспорт данных с сайта** - вручную экспортировать историю ордеров
3. **Начать с чистого листа** - начать отслеживание с текущего момента
4. **Использовать синтетические сделки** - создать "начальную" сделку на основе баланса

### Команда для синхронизации:

```bash
php artisan position:sync-from-balance --bot=20 --force
```

Это создаст синтетическую сделку BUY на основе текущего баланса, что позволит боту знать текущую позицию.

## Вывод

- **Для серьезной торговли**: рекомендуется Binance или OKX
- **Если остаемся на Bybit**: использовать `position:sync-from-balance` для синхронизации позиции
- **Архитектура**: уже готова для поддержки нескольких бирж
