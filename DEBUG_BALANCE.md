# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–∫–∏ "Invalid private GET response"

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ - —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
- HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥ (401, 403, 500 –∏ —Ç.–¥.)
- –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ –æ—Ç API
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

## üõ†Ô∏è –®–∞–≥–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–ª—é—á –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
php artisan key:generate
```

### 2. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à

```bash
php artisan config:clear
php artisan cache:clear
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á–∏ –≤ –ë–î

```bash
php artisan tinker
```

```php
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
>>> $account = \App\Models\ExchangeAccount::find(5);
>>> $account->is_testnet; // –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å true
>>> $account->api_key; // –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –∫–ª—é—á (–ø–µ—Ä–≤—ã–µ —Å–∏–º–≤–æ–ª—ã)

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ–∫—Ä–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω
>>> $account->api_secret; // –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

>>> exit
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–ª—é—á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ `.env`:
```env
BYBIT_TESTNET_API_KEY=–≤–∞—à_–∫–ª—é—á
BYBIT_TESTNET_API_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç
```

–ò —á—Ç–æ –æ–Ω–∏ –æ—Ç **testnet.bybit.com** (–Ω–µ –æ—Ç bybit.com).

### 5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞

```bash
php artisan balance:check --account=5
```

–¢–µ–ø–µ—Ä—å –≤—ã —É–≤–∏–¥–∏—Ç–µ –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—É—é –æ—à–∏–±–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä:
- HTTP Status: 401 - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏
- HTTP Status: 403 - –Ω–µ—Ç –ø—Ä–∞–≤
- HTTP Status: 200 –Ω–æ retCode != 0 - –æ—à–∏–±–∫–∞ API

## üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

```bash
php artisan tinker
```

```php
>>> $account = \App\Models\ExchangeAccount::find(5);
>>> $bybit = new \App\Services\Exchanges\Bybit\BybitService($account);

// –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∏)
>>> try {
    $price = $bybit->getPrice('BTCUSDT');
    echo "‚úÖ Public request works. Price: $price\n";
} catch (\Exception $e) {
    echo "‚ùå Public request failed: " . $e->getMessage() . "\n";
}

// –ï—Å–ª–∏ –ø—É–±–ª–∏—á–Ω—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π
>>> try {
    $balance = $bybit->getBalance('USDT');
    echo "‚úÖ Balance: $balance\n";
} catch (\Exception $e) {
    echo "‚ùå Balance request failed: " . $e->getMessage() . "\n";
    echo "Full error:\n";
    print_r($e->getTraceAsString());
}

>>> exit
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç –≥–¥–µ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞.

## ‚ö†Ô∏è –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

### HTTP 401 (Unauthorized)
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ API –∫–ª—é—á–∏
- –ö–ª—é—á–∏ –æ—Ç –¥—Ä—É–≥–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
- –ö–ª—é—á–∏ –æ—Ç production –≤–º–µ—Å—Ç–æ testnet (–∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç)

### HTTP 403 (Forbidden)
- API –∫–ª—é—á –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —á—Ç–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
- IP whitelist –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å

### HTTP 200 –Ω–æ retCode != 0
- –û—à–∏–±–∫–∞ API (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ retMsg)
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞

### –ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç
- –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é
- –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ firewall

## üí° –†–µ—à–µ–Ω–∏–µ

1. **–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–ª—é—á**: `php artisan key:generate`
2. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à**: `php artisan config:clear`
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á–∏**: —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –æ–Ω–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏ –æ—Ç testnet
4. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞**: `php artisan balance:check --account=5`

–¢–µ–ø–µ—Ä—å –≤—ã —É–≤–∏–¥–∏—Ç–µ –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—É—é –æ—à–∏–±–∫—É, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–∂–µ—Ç –ø–æ–Ω—è—Ç—å –ø—Ä–æ–±–ª–µ–º—É.
