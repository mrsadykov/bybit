# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø—Ä–æ—Å—Ç–æ—è —Å–µ—Ä–≤–µ—Ä–∞

–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –±—ã–ª –≤—ã–∫–ª—é—á–µ–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, 7:30‚Äì10:10), –ø–æ–∫–∞ –æ–Ω –ª–µ–∂–∞–ª:
- **–Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª–∏—Å—å** `orders:sync` (–∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É) –∏ `bots:run` (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç);
- –±–∏—Ä–∂–∞ OKX –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∞ –∏—Å–ø–æ–ª–Ω—è—Ç—å –æ—Ä–¥–µ—Ä–∞ –ø–æ —Ä—ã–Ω–∫—É, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç—Å—Ç–∞—ë—Ç –æ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

---

## 1. –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### 1.1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–∏—Ä–∂–µ–π

```bash
cd /var/www/trading-bot   # –∏–ª–∏ –≤–∞—à –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
php artisan orders:sync
```

**–ó–∞—á–µ–º:** `orders:sync` –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç —Å OKX —Å—Ç–∞—Ç—É—Å—ã –æ—Ä–¥–µ—Ä–æ–≤ (`FILLED`, —Ü–µ–Ω—ã, `filled_at`), –æ–±–Ω–æ–≤–ª—è–µ—Ç `trades` –≤ –ë–î –∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç `closed_at` / `realized_pnl` –¥–ª—è BUY –ø–æ SELL. –í—Å—ë, —á—Ç–æ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª–æ—Å—å –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è, –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–æ.

### 1.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–≤–æ–¥

- –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤–∏–¥–∞ `‚úÖ –û—Ä–¥–µ—Ä filled - –û–±–Ω–æ–≤–ª–µ–Ω!` –ø–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º —Å–¥–µ–ª–∫–∞–º.
- –ï—Å–ª–∏ –ø–æ –∫–∞–∫–∏–º-—Ç–æ –æ—Ä–¥–µ—Ä–∞–º `‚ùå –û—Ä–¥–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–∞ –±–∏—Ä–∂–µ` ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `order_id` –∏ –Ω–∞–ª–∏—á–∏–µ —Å–¥–µ–ª–∫–∏ –≤ OKX (Order History / Trade Details).

---

## 2. Cron –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫

### 2.1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ cron –∑–∞–ø—É—â–µ–Ω

```bash
crontab -l
```

–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞:

```
* * * * * cd /var/www/trading-bot && php artisan schedule:run >> /dev/null 2>&1
```

–ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ `crontab -e`.

### 2.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —à–µ–¥—É–ª–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã

```bash
php artisan schedule:list
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å `bots:run` (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω), `orders:sync` (–∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É) –∏ `telegram:heartbeat` (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω, –µ—Å–ª–∏ –∑–∞–¥–∞–Ω `TELEGRAM_HEALTH_CHAT_ID`).

---

## 3. –ö—Ä–∞—Ç–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ ¬´–≤—Å—ë –ª–∏ –æ–∫¬ª

| –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å | –ö–∞–∫ |
|---------------|-----|
| –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–¥–µ–ª–æ–∫ | `php artisan orders:sync` ‚Äî –±–µ–∑ –æ—à–∏–±–æ–∫, –æ–∂–∏–¥–∞–µ–º—ã–µ `Updated` |
| –ó–∞–ø—É—Å–∫ –±–æ—Ç–æ–≤ | –í Telegram –ø—Ä–∏—Ö–æ–¥—è—Ç ¬´–ó–ê–ü–£–°–ö –ë–û–¢–û–í¬ª –∫–∞–∂–¥—ã–µ ~5 –º–∏–Ω—É—Ç |
| –ë–∞–ª–∞–Ω—Å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ | Dashboard ‚Üí –±–ª–æ–∫ ¬´–ë–∞–ª–∞–Ω—Å—ã –∞–∫–∫–∞—É–Ω—Ç–æ–≤¬ª |
| –ë–∞–ª–∞–Ω—Å –Ω–∞ OKX | OKX ‚Üí Spot ‚Üí –±–∞–ª–∞–Ω—Å USDT/–∫—Ä–∏–ø—Ç–æ |
| –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ | Dashboard ¬´–û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏¬ª –∏/–∏–ª–∏ `trades` —Å `closed_at IS NULL` |

–°–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –∏ —Å–ø–∏—Å–æ–∫ –ø–æ–∑–∏—Ü–∏–π —Å OKX. –ï—Å–ª–∏ –µ—Å—Ç—å —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è ‚Äî —Å–º. —Ä–∞–∑–¥–µ–ª 4.

---

## 4. –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è —Å OKX (–±–∞–ª–∞–Ω—Å / –ø–æ–∑–∏—Ü–∏–∏)

- **–≠–∫—Å–ø–æ—Ä—Ç —Å OKX:** Order History, Trade Details (–∫–∞–∫ —É –≤–∞—Å –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞).
- **–ë–∞–∑–∞:** —Ç–∞–±–ª–∏—Ü–∞ `trades` (–¥–∞–º–ø `trades (2).sql`).

`orders:sync` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å **—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏** –≤ –ë–î —Å–¥–µ–ª–∫–∞–º–∏ (–ø–æ `order_id`). –û–Ω **–Ω–µ** –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ –æ—Ä–¥–µ—Ä–∞ –∏–∑ OKX –≤ –ë–î.

- –ï—Å–ª–∏ –±–æ—Ç –≤—ã—Å—Ç–∞–≤–∏–ª –æ—Ä–¥–µ—Ä –¥–æ –ø—Ä–æ—Å—Ç–æ—è, –∞ fill –ø—Ä–∏—à—ë–ª —É–∂–µ –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è ‚Äî –ø–æ—Å–ª–µ `orders:sync` —Å—Ç–∞—Ç—É—Å –∏ `filled_at` –æ–±–Ω–æ–≤—è—Ç—Å—è.
- –ï—Å–ª–∏ –≤—ã —Ç–æ—Ä–≥–æ–≤–∞–ª–∏ **–≤—Ä—É—á–Ω—É—é** –Ω–∞ OKX –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è, —ç—Ç–∏ —Å–¥–µ–ª–∫–∏ –≤ –ë–î –Ω–µ –ø–æ—è–≤—è—Ç—Å—è. –ò—Ö –Ω—É–∂–Ω–æ –ª–∏–±–æ —É—á–µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ, –ª–∏–±–æ –¥–æ–±–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ —Å–≤–æ—é –ª–æ–≥–∏–∫—É/–∏–º–ø–æ—Ä—Ç.

---

## 5. –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ —Ü–∏—Ñ—Ä OKX vs –ë–î

- OKX: **134,67 USDT**, –¥–Ω–µ–≤–Ω–æ–π PnL **-‚ÇÆ2,18 (-1,59%)** ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –ø—Ä–∏ –ø—Ä–æ—Å–∞–¥–∫–µ –∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ SL/TP.
- –í –ë–î `realized_pnl` –ø–æ —Å–¥–µ–ª–∫–∞–º –º–æ–∂–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –∏–∑‚Äë–∑–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–π –∏ –∫–æ–º–∏—Å—Å–∏–π. –ü–æ—Å–ª–µ `orders:sync` —á–∏—Å–ª–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±–ª–∏–∂–µ –∫ OKX.

---

## 6. –û—Ç–¥–µ–ª—å–Ω—ã–π Telegram‚Äë—á–∞—Ç ¬´—Å–µ—Ä–≤–µ—Ä –∂–∏–≤¬ª (heartbeat)

–ß—Ç–æ–±—ã **–æ—Ç–¥–µ–ª—å–Ω–æ** –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —É–ø–∞–ª (–Ω–µ—Ç heartbeat ‚Äî –ø—Ä–æ–≤–µ—Ä—è–π —Å–µ—Ä–≤–µ—Ä):

1. –°–æ–∑–¥–∞–π—Ç–µ **–æ—Ç–¥–µ–ª—å–Ω—ã–π** —á–∞—Ç –≤ Telegram (–ª–∏—á–Ω—ã–π —Å –±–æ—Ç–æ–º –∏–ª–∏ –≥—Ä—É–ø–ø–∞), –¥–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞, –ø–æ–ª—É—á–∏—Ç–µ `chat_id` —á–µ—Ä–µ–∑ `php artisan telegram:chat-id`.
2. –í `.env` –∑–∞–¥–∞–π—Ç–µ `TELEGRAM_HEALTH_CHAT_ID=<chat_id>`.
3. –ö–æ–º–∞–Ω–¥–∞ `telegram:heartbeat` –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –∫–∞–∂–¥—ã–µ **5 –º–∏–Ω—É—Ç** —à–ª—ë—Ç –≤ —ç—Ç–æ—Ç —á–∞—Ç: **üü¢ –°–ï–†–í–ï–† –†–ê–ë–û–¢–ê–ï–¢ (SERVER UP)**.

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: **[TELEGRAM_HEARTBEAT_SETUP.md](TELEGRAM_HEARTBEAT_SETUP.md)**.

---

## 7. –ß–µ–∫–ª–∏—Å—Ç ¬´—á—Ç–æ —Å–¥–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ –ø—Ä–æ—Å—Ç–æ—è¬ª

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å `php artisan orders:sync`.
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `crontab` –∏ `schedule:list`.
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ Telegram —Å–Ω–æ–≤–∞ –∏–¥—É—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç –±–æ—Ç–æ–≤ –∏ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω) heartbeat –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —á–∞—Ç.
4. –°–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –∏ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ —Å OKX.
5. –ü—Ä–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è—Ö ‚Äî —Ä–∞–∑–æ–±—Ä–∞—Ç—å –ø–æ Order History / Trade Details –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —á–µ—Ä–µ–∑ —Å–≤–æ–∏ —Å–∫—Ä–∏–ø—Ç—ã.

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ —Å–Ω–æ–≤–∞ –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∫—É: `bots:run` –∏ `orders:sync` –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.
