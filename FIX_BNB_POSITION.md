# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–∑–∏—Ü–∏–µ–π BNBUSDT

## üìä –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

**–ë–∞–ª–∞–Ω—Å –Ω–∞ –±–∏—Ä–∂–µ:**
- BNB: 3.55E-7 (~$0.0003) - –ø–æ—á—Ç–∏ –Ω–µ—Ç

**–ü–æ–∑–∏—Ü–∏—è –≤ –ë–î:**
- BNBUSDT: 0.00564500 (~$5.00) - –æ—Ç–∫—Ä—ã—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü–æ–∑–∏—Ü–∏—è –±—ã–ª–∞ –ø—Ä–æ–¥–∞–Ω–∞ –Ω–∞ –±–∏—Ä–∂–µ, –Ω–æ –Ω–µ –∑–∞–∫—Ä—ã—Ç–∞ –≤ –ë–î
- –ù–µ—Ç SELL –æ—Ä–¥–µ—Ä–∞ –≤ –ë–î, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–∫—Ä—ã–ª –±—ã BUY –ø–æ–∑–∏—Ü–∏—é

---

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ—Ä–¥–µ—Ä–æ–≤ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –æ—Ä–¥–µ—Ä–æ–≤
php artisan orders:sync
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
- –ö–æ–º–∞–Ω–¥–∞ –Ω–∞–π–¥–µ—Ç SELL –æ—Ä–¥–µ—Ä –Ω–∞ –±–∏—Ä–∂–µ
- –°–æ–∑–¥–∞—Å—Ç SELL –∑–∞–ø–∏—Å—å –≤ –ë–î
- –ó–∞–∫—Ä–æ–µ—Ç BUY –ø–æ–∑–∏—Ü–∏—é
- –†–∞—Å—Å—á–∏—Ç–∞–µ—Ç PnL

**–ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ:**
- –í–æ–∑–º–æ–∂–Ω–æ, –æ—Ä–¥–µ—Ä —Å–ª–∏—à–∫–æ–º —Å—Ç–∞—Ä—ã–π (OKX —Ö—Ä–∞–Ω–∏—Ç –∏—Å—Ç–æ—Ä–∏—é 3 –º–µ—Å—è—Ü–∞)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –†–µ—à–µ–Ω–∏–µ 2

---

### –†–µ—à–µ–Ω–∏–µ 2: –ó–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é –≤—Ä—É—á–Ω—É—é

```bash
# –ó–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É
php artisan positions:close-small --threshold=10.0 --bot=4 --symbol=BNBUSDT
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
- –ö–æ–º–∞–Ω–¥–∞ –Ω–∞–π–¥–µ—Ç –ø–æ–∑–∏—Ü–∏—é < 10 USDT
- –ó–∞–∫—Ä–æ–µ—Ç –µ—ë –≤ –ë–î (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç `closed_at`)
- PnL –±—É–¥–µ—Ç = 0 (—Ç.–∫. –Ω–µ—Ç SELL –æ—Ä–¥–µ—Ä–∞)

---

### –†–µ—à–µ–Ω–∏–µ 3: –ó–∞–∫—Ä—ã—Ç—å –Ω–∞–ø—Ä—è–º—É—é –≤ –ë–î (–µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è —Ç–æ—á–Ω–æ –ø—Ä–æ–¥–∞–Ω–∞)

```bash
php artisan tinker
```

```php
// –ù–∞–π—Ç–∏ –æ—Ç–∫—Ä—ã—Ç—É—é –ø–æ–∑–∏—Ü–∏—é BNBUSDT –¥–ª—è –±–æ—Ç–∞ #4
$trade = \App\Models\Trade::where('trading_bot_id', 4)
    ->where('symbol', 'BNBUSDT')
    ->where('side', 'BUY')
    ->where('status', 'FILLED')
    ->whereNull('closed_at')
    ->first();

if ($trade) {
    // –ó–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é
    $trade->update([
        'closed_at' => now(),
        'realized_pnl' => 0, // PnL = 0, —Ç.–∫. –Ω–µ—Ç SELL –æ—Ä–¥–µ—Ä–∞
    ]);
    echo "‚úÖ –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞\n";
} else {
    echo "‚ùå –ü–æ–∑–∏—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞\n";
}

exit
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å
php artisan balance:check

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (—á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–ª–∏ –ë–î)
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: BNBUSDT –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞
```

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ù–∞—á–Ω–∏—Ç–µ —Å –†–µ—à–µ–Ω–∏—è 1** (`orders:sync`) - —ç—Ç–æ —Å–∞–º—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±, –∫–æ—Ç–æ—Ä—ã–π:
- –ù–∞–π–¥–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π SELL –æ—Ä–¥–µ—Ä –Ω–∞ –±–∏—Ä–∂–µ
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–∫—Ä–æ–µ—Ç –ø–æ–∑–∏—Ü–∏—é
- –†–∞—Å—Å—á–∏—Ç–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π PnL

–ï—Å–ª–∏ —ç—Ç–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç (–æ—Ä–¥–µ—Ä —Å–ª–∏—à–∫–æ–º —Å—Ç–∞—Ä—ã–π), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –†–µ—à–µ–Ω–∏–µ 2 –∏–ª–∏ 3.
