# Чек-лист: улучшение риск/доходность

Гарантированной прибыли нет, но можно улучшить соотношение риск/доходность за счёт настроек и дисциплины.

---

## 1. Мани-менеджмент (уже есть в системе)

### В дашборде — у каждого спот-бота
- **max_daily_loss_usdt** — при дневном убытке по боту ≥ N USDT новые BUY не выставляются (оставшиеся позиции можно закрывать по SL/TP/сигналу).
- **max_drawdown_percent** — пауза новых сделок при просадке от пика по боту на X%.
- **max_losing_streak** — пауза после N убыточных сделок подряд по боту.
- **position_size** — не ставить слишком большой размер на один бот (5–10 USDT на спот при небольшом депозите).
- **stop_loss_percent / take_profit_percent** — должны быть заданы (у тебя уже 3–6% SL, 6–12% TP).

**Что сделать:** проверить в интерфейсе, что у всех ботов заданы разумные лимиты (например max_daily_loss_usdt 5–20, max_losing_streak 3–5 при желании ограничить риск).

### В `.env` (глобально)
- **TRADING_POSITION_SIZE_MULTIPLIER=0.5** — торговать половинным размером от заданного в боте (меньше риск на сделку).
- **TRADING_PAUSE_NEW_OPENS_DAILY_LOSS_USDT=15** — при дневном убытке по споту ≥ 15 USDT не открывать новые позиции до следующего дня.
- **TRADING_ALERT_DAILY_LOSS_USDT=10** — алерт в Telegram при дневном убытке ≥ 10 USDT.
- **TRADING_ALERT_LOSING_STREAK=3** — алерт при 3+ убыточных сделках подряд (чтобы обратить внимание и при желании ужесточить настройки).

**Что сделать:** при желании снизить риск выставить множитель 0.5 и паузу/алерты по дневному убытку и серии убытков.

---

## 2. Фильтры (меньше сделок, но с лучшим контекстом)

- **Фильтр MACD** — в дашборде у бота включить «Фильтр MACD»: BUY только при histogram ≥ 0, SELL при ≤ 0. Сначала проверить на бэктесте: `strategy:backtest-all-bots --period=1500` с включённым у ботов `use_macd_filter` и без — сравнить число сделок и PnL.
- **Фильтр тренда** — в `.env`: `TRADING_TREND_FILTER_ENABLED=true` (BUY только если цена выше длинной EMA). Уменьшает входы против тренда, но и число сделок падает (как в твоём `strategy:backtest-all` с 0 сделок).
- **Консервативный RSI** — `TRADING_CONSERVATIVE_RSI=true`: пороги 35/65 вместо 38/62 — реже входы, меньше шума.

**Что сделать:** по желанию включить MACD на одном-двух ботах и смотреть статистику; тренд и conservative RSI включать только если готов к меньшему количеству сделок.

---

## 3. Оптимизация и регламент

- Раз в 1–2 недели запускать **strategy:optimize-all** (при желании с `--period=1500` или больше, если API даёт свечи).
- После оптимизации — **strategy:apply-optimize --dry-run**, затем **strategy:apply-optimize** если пороги изменились.
- Периодически смотреть **bot_statistics** и дашборд: при росте просадки или серии убытков — уменьшить размер позиции или временно отключить часть ботов.

**Что сделать:** завести привычку раз в 1–2 недели запускать оптимизацию и применять результат при отличии от текущих порогов.

---

## 4. Что не трогать без необходимости

- Не ставить большой **position_size** на один бот относительно депозита.
- Не отключать **stop_loss** и **take_profit** у ботов.
- Не включать все фильтры сразу без бэктеста — иначе можно получить почти нуль сделок (как с trend filter в backtest-all).

---

## Итог

| Действие | Эффект |
|----------|--------|
| Выставить max_daily_loss_usdt / max_losing_streak по ботам | Ограничение убытков за день и после серии убытков |
| TRADING_POSITION_SIZE_MULTIPLIER=0.5 | Меньше риск на сделку |
| TRADING_PAUSE_NEW_OPENS_DAILY_LOSS_USDT + алерты | Дисциплина и реакция на плохой день |
| Включить MACD на части ботов (после бэктеста) | Меньше ложных входов, возможно лучший риск/доходность |
| Раз в 1–2 недели optimize-all + apply-optimize | Адаптация порогов к последним данным |

Гарантии прибыли это не даёт, но улучшает контроль риска и согласованность параметров с текущим рынком.
