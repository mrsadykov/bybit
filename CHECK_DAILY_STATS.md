# üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ Telegram

## ‚è∞ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ

–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è **–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 09:00** (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `routes/console.php`).

---

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ routes/console.php

```bash
cat routes/console.php
```

–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞:
```php
Schedule::command('telegram:daily-stats')->dailyAt('09:00');
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Laravel Scheduler —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å cron
crontab -l
```

–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞:
```
* * * * * cd /var/www/trading-bot && php artisan schedule:run >> /dev/null 2>&1
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤—Ä—É—á–Ω—É—é (–¥–ª—è —Ç–µ—Å—Ç–∞)

```bash
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞ —Å–µ–≥–æ–¥–Ω—è
php artisan telegram:daily-stats

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É
php artisan telegram:daily-stats --date=2026-01-21
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏:**
- –ö–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- –í Telegram –ø—Ä–∏–¥–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- –í –∫–æ–Ω—Å–æ–ª–∏ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ: "‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é..."

---

## üì± –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram

–°–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```
üìä –ï–ñ–ï–î–ù–ï–í–ù–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê (DAILY STATISTICS)

–î–∞—Ç–∞ (Date): 2026-01-21

üí∞ PnL: +0.50 USDT üìà
üìä –ó–∞–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π (Closed Positions): 2
üìà –ü—Ä–∏–±—ã–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ (Winning Trades): 1
üìâ –£–±—ã—Ç–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ (Losing Trades): 1
üéØ –ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–±–µ–¥ (Win Rate): 50%
üì¶ –í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫ (Total Trades): 4
üîì –û—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π (Open Positions): 1
ü§ñ –ê–∫—Ç–∏–≤–Ω—ã—Ö –±–æ—Ç–æ–≤ (Active Bots): 3
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–æ–º–∞–Ω–¥—ã

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é

```bash
php artisan telegram:daily-stats
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
–†–∞—Å—á–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑–∞ 2026-01-21 (Calculating daily statistics for 2026-01-21)...
‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é #1 (mrsadykov96@gmail.com) (Statistics sent to user #1 (mrsadykov96@gmail.com))
–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ 1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é(–∞–º) (Daily statistics sent to 1 user(s)).
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏
tail -n 50 storage/logs/laravel.log | grep -i "daily\|telegram\|stats"

# –ò–ª–∏ —Å–ª–µ–¥–∏—Ç—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f storage/logs/laravel.log
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ tinker

```bash
php artisan tinker
```

```php
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —Å–¥–µ–ª–∫–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
$today = now()->format('Y-m-d');
$trades = \App\Models\Trade::whereDate('created_at', $today)->count();
echo "–°–¥–µ–ª–æ–∫ –∑–∞ —Å–µ–≥–æ–¥–Ω—è: {$trades}\n";

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
$closed = \App\Models\Trade::whereNotNull('closed_at')
    ->whereDate('closed_at', $today)
    ->whereNotNull('realized_pnl')
    ->count();
echo "–ó–∞–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π –∑–∞ —Å–µ–≥–æ–¥–Ω—è: {$closed}\n";

exit
```

---

## ‚ö†Ô∏è –ü–æ—á–µ–º—É –º–æ–∂–µ—Ç –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

### 1. –ù–µ—Ç —Å–¥–µ–ª–æ–∫ –∑–∞ –¥–µ–Ω—å

–ö–æ–º–∞–Ω–¥–∞ **–ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç** —Å–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏:
- `total_trades === 0` –ò
- `closed_positions === 0`

**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –∑–∞ –¥–µ–Ω—å –Ω–µ –±—ã–ª–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

### 2. Telegram –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env`:
```env
TELEGRAM_BOT_TOKEN=your_token
TELEGRAM_CHAT_ID=your_chat_id
```

### 3. Scheduler –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ cron:
```bash
crontab -l
```

–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞:
```
* * * * * cd /var/www/trading-bot && php artisan schedule:run >> /dev/null 2>&1
```

### 4. –í—Ä–µ–º—è –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç

–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ **09:00 –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–µ—Ä–≤–µ—Ä–∞**. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
```bash
date
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

### –¢–µ—Å—Ç 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é

```bash
php artisan telegram:daily-stats
```

### –¢–µ—Å—Ç 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–ª—è –≤—á–µ—Ä–∞—à–Ω–µ–≥–æ –¥–Ω—è

```bash
php artisan telegram:daily-stats --date=2026-01-20
```

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```bash
php artisan tinker
```

```php
$command = new \App\Console\Commands\SendDailyStatsCommand();
$stats = $command->calculateDailyStats(1, now()->format('Y-m-d'));
print_r($stats);

exit
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] –ö–æ–º–∞–Ω–¥–∞ `php artisan telegram:daily-stats` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í Telegram –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- [ ] Cron –Ω–∞—Å—Ç—Ä–æ–µ–Ω: `* * * * * php artisan schedule:run`
- [ ] –í `routes/console.php` –µ—Å—Ç—å: `Schedule::command('telegram:daily-stats')->dailyAt('09:00');`
- [ ] Telegram —Ç–æ–∫–µ–Ω –∏ chat_id –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ `.env`
- [ ] –ï—Å—Ç—å —Å–¥–µ–ª–∫–∏ –∏–ª–∏ –∑–∞–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞ –¥–µ–Ω—å (–∏–Ω–∞—á–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è)

---

## üìù –õ–æ–≥–∏ –∫–æ–º–∞–Ω–¥—ã

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ cron, –ª–æ–≥–∏ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏:

```bash
# –õ–æ–≥–∏ Laravel
tail -f storage/logs/laravel.log

# –ò–ª–∏ –µ—Å–ª–∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª
tail -f storage/logs/scheduler.log
```

---

## üÜò –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   ```bash
   php artisan telegram:test
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:**
   ```bash
   php artisan list | grep daily-stats
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ä—É—á–Ω—É—é —Å –≤—ã–≤–æ–¥–æ–º:**
   ```bash
   php artisan telegram:daily-stats -v
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   tail -f storage/logs/laravel.log
   ```
