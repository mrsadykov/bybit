# ðŸ”§ Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ HTTP 401 (Unauthorized)

## ðŸ” ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ¸

HTTP 401 Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñƒ Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸ÐµÐ¹. Ð’ Ð²Ð°ÑˆÐµÐ¼ ÑÐ»ÑƒÑ‡Ð°Ðµ:
1. **ÐÐµÑ‚ APP_KEY** - Laravel Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ñ€Ð°ÑÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ `api_secret`
2. **ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ðµ API ÐºÐ»ÑŽÑ‡Ð¸** - ÐºÐ»ÑŽÑ‡Ð¸ Ð½ÐµÐ²ÐµÑ€Ð½Ñ‹Ðµ Ð¸Ð»Ð¸ Ð¾Ñ‚ Ð´Ñ€ÑƒÐ³Ð¾Ð³Ð¾ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð°
3. **ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÑŒÑŽ** - Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð°Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÑŒ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°

## âœ… Ð ÐµÑˆÐµÐ½Ð¸Ðµ

### Ð¨Ð°Ð³ 1: Ð¡Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ APP_KEY

```bash
php artisan key:generate
```

### Ð¨Ð°Ð³ 2: ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ ÐºÑÑˆ

```bash
php artisan config:clear
php artisan cache:clear
```

### Ð¨Ð°Ð³ 3: ÐŸÐµÑ€ÐµÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ñ‹

ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° `create-bybit-account` Ð¿ÐµÑ€ÐµÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ñ‹ Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¼ ÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼:

```bash
php artisan create-bybit-account
```

### Ð¨Ð°Ð³ 4: ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ

Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð½Ð¾Ð²ÑƒÑŽ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ¸:

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ testnet
php artisan api:test --account=7

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ production
php artisan api:test --account=6
```

Ð˜Ð»Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð±Ð°Ð»Ð°Ð½Ñ:

```bash
php artisan balance:check --testnet
php artisan balance:check --production
```

## ðŸ” Ð”Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ°

ÐÐ¾Ð²Ð°Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð° `api:test` Ð¿Ð¾ÐºÐ°Ð¶ÐµÑ‚:
- âœ… ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ API ÐºÐ»ÑŽÑ‡ÐµÐ¹
- âœ… Ð£ÑÐ¿ÐµÑˆÐ½Ð¾ÑÑ‚ÑŒ Ñ€Ð°ÑÑˆÐ¸Ñ„Ñ€Ð¾Ð²ÐºÐ¸ ÑÐµÐºÑ€ÐµÑ‚Ð°
- âœ… Ð Ð°Ð±Ð¾Ñ‚Ñƒ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ API (Ð±ÐµÐ· Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸)
- âœ… Ð Ð°Ð±Ð¾Ñ‚Ñƒ Ð¿Ñ€Ð¸Ð²Ð°Ñ‚Ð½Ð¾Ð³Ð¾ API (Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸ÐµÐ¹)
- âœ… Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ ÐµÑÐ»Ð¸ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð½Ðµ Ñ‚Ð°Ðº

## âš ï¸ Ð•ÑÐ»Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ° 401 ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ÑÑ

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ API ÐºÐ»ÑŽÑ‡Ð¸:

1. **Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ ÐºÐ»ÑŽÑ‡Ð¸ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ðµ**:
   - Production ÐºÐ»ÑŽÑ‡Ð¸ Ð¾Ñ‚ bybit.com
   - Testnet ÐºÐ»ÑŽÑ‡Ð¸ Ð¾Ñ‚ testnet.bybit.com

2. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ñ€Ð°Ð²Ð° API ÐºÐ»ÑŽÑ‡Ð°**:
   - Ð”Ð¾Ð»Ð¶Ð½Ñ‹ Ð±Ñ‹Ñ‚ÑŒ: **Read** + **Trade**
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð½Ð° ÑÐ°Ð¹Ñ‚Ðµ Ð±Ð¸Ñ€Ð¶Ð¸

3. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ IP whitelist**:
   - Ð•ÑÐ»Ð¸ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½ - Ð´Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð²Ð°Ñˆ IP
   - Ð˜Ð»Ð¸ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ

4. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ ÐºÐ»ÑŽÑ‡ÐµÐ¹**:
   - ÐÐµÑ‚ Ð»Ð¸ÑˆÐ½Ð¸Ñ… Ð¿Ñ€Ð¾Ð±ÐµÐ»Ð¾Ð²
   - Ð¡ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ
   - ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚

## ðŸ’¡ Ð‘Ñ‹ÑÑ‚Ñ€Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ

```bash
# 1. Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ ÐºÐ»ÑŽÑ‡Ð°
php artisan key:generate

# 2. ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° ÐºÑÑˆÐ°
php artisan config:clear

# 3. ÐŸÐµÑ€ÐµÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð¾Ð²
php artisan create-bybit-account

# 4. Ð”Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ°
php artisan api:test --account=7
```

## ðŸ“ ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ‡ÐµÑ€ÐµÐ· tinker

Ð•ÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ:

```bash
php artisan tinker
```

```php
// ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ñ‡Ñ‚Ð¾ APP_KEY ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½
>>> config('app.key'); // Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ ÐºÐ»ÑŽÑ‡

// ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚
>>> $account = \App\Models\ExchangeAccount::find(7);
>>> $account->api_key; // Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÐºÐ»ÑŽÑ‡
>>> $account->api_secret; // Ð´Ð¾Ð»Ð¶ÐµÐ½ Ñ€Ð°ÑÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸

// ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ
>>> $bybit = new \App\Services\Exchanges\Bybit\BybitService($account);
>>> $bybit->getPrice('BTCUSDT'); // Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ
>>> $bybit->getBalance('USDT'); // Ð¿Ñ€Ð¸Ð²Ð°Ñ‚Ð½Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ

>>> exit
```
