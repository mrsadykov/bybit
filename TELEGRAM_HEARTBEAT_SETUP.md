# –û—Ç–¥–µ–ª—å–Ω—ã–π Telegram‚Äë—á–∞—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Ä–≤–µ—Ä–∞ (heartbeat)

–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –ø–∞–¥–∞–µ—Ç, –≤—ã –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–∞. –ß—Ç–æ–±—ã **–æ—Ç–¥–µ–ª—å–Ω–æ** –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ ¬´—Å–µ—Ä–≤–µ—Ä –µ—â—ë –∂–∏–≤–æ–π¬ª –∏–ª–∏ ¬´—É–∂–µ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç¬ª, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–æ—Ç–¥–µ–ª—å–Ω—ã–π —á–∞—Ç** —Ç–æ–ª—å–∫–æ –¥–ª—è heartbeat.

---

## 1. –ò–¥–µ—è

- –ö–æ–º–∞–Ω–¥–∞ `telegram:heartbeat` –∫–∞–∂–¥—ã–µ **5 –º–∏–Ω—É—Ç** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ **–æ—Ç–¥–µ–ª—å–Ω—ã–π** —á–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–∏–¥–∞:  
  **üü¢ –°–ï–†–í–ï–† –†–ê–ë–û–¢–ê–ï–¢ (SERVER UP)** + –≤—Ä–µ–º—è.
- –û—Å–Ω–æ–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—Å–¥–µ–ª–∫–∏, –±–æ—Ç—ã, –æ—à–∏–±–∫–∏) –∏–¥—É—Ç –≤ –æ–±—ã—á–Ω—ã–π —á–∞—Ç (`TELEGRAM_CHAT_ID`).
- Heartbeat –∏–¥—ë—Ç **—Ç–æ–ª—å–∫–æ** –≤ —á–∞—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (`TELEGRAM_HEALTH_CHAT_ID`).
- –ï—Å–ª–∏ –≤ —á–∞—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å ‚Äî **—Å–µ—Ä–≤–µ—Ä, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —É–ø–∞–ª** (–∏–ª–∏ cron –Ω–µ –∫—Ä—É—Ç–∏—Ç—Å—è).

---

## 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 2.1. –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —á–∞—Ç

1. –°–æ–∑–¥–∞–π—Ç–µ **–Ω–æ–≤—ã–π** —á–∞—Ç –≤ Telegram:
   - –ª–∏—á–Ω—ã–π —á–∞—Ç —Å –±–æ—Ç–æ–º, **–∏–ª–∏**
   - –æ—Ç–¥–µ–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∞ (–¥–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É).

2. –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É **/start** (–µ—Å–ª–∏ –ª–∏—á–Ω—ã–π —á–∞—Ç) –∏–ª–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É.

### 2.2. –£–∑–Ω–∞—Ç—å Chat ID —ç—Ç–æ–≥–æ —á–∞—Ç–∞

**–í–∞–∂–Ω–æ:** `chat_id` ‚Äî —ç—Ç–æ ID —á–∞—Ç–∞ (–ª–∏—á–Ω–æ–≥–æ —á–∞—Ç–∞ —Å –±–æ—Ç–æ–º –∏–ª–∏ –≥—Ä—É–ø–ø—ã), –∞ –Ω–µ ID –±–æ—Ç–∞.

#### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `telegram:chat-id` —Å —Ç–æ–∫–µ–Ω–æ–º health-–±–æ—Ç–∞

```bash
php artisan telegram:chat-id --token=8280381462:AAEeMOZ7aGtyz1n7MoWoJVSTobmZ1TEpn00
```

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ health-–±–æ—Ç–∞ `@isServerAlive1996bot`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É **/start**
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 —Å–µ–∫—É–Ω–¥—ã
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤—ã—à–µ
5. –ö–æ–º–∞–Ω–¥–∞ –≤—ã–≤–µ–¥–µ—Ç `chat_id` –¥–ª—è —á–∞—Ç–∞ —Å —ç—Ç–∏–º –±–æ—Ç–æ–º

#### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ @userinfobot

1. –û—Ç–∫—Ä–æ–π—Ç–µ `@userinfobot` –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/start`)
3. –ë–æ—Ç –≤–µ—Ä–Ω—ë—Ç –≤–∞—à **Chat ID** (—ç—Ç–æ ID –≤–∞—à–µ–≥–æ –ª–∏—á–Ω–æ–≥–æ —á–∞—Ç–∞)
4. –ï—Å–ª–∏ –≤—ã —Å–æ–∑–¥–∞–ª–∏ **–≥—Ä—É–ø–ø—É** –¥–ª—è health-–±–æ—Ç–∞:
   - –î–æ–±–∞–≤—å—Ç–µ `@userinfobot` –≤ —ç—Ç—É –≥—Ä—É–ø–ø—É
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É
   - –ë–æ—Ç –≤–µ—Ä–Ω—ë—Ç **Chat ID –≥—Ä—É–ø–ø—ã**

### 2.3. –ü—Ä–æ–ø–∏—Å–∞—Ç—å –≤ .env

```env
TELEGRAM_HEALTH_BOT_TOKEN=8280381462:AAEeMOZ7aGtyz1n7MoWoJVSTobmZ1TEpn00
TELEGRAM_HEALTH_CHAT_ID=123456789
```

–ü–æ–¥—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π `chat_id` –≤–º–µ—Å—Ç–æ `123456789`.

### 2.4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å

```bash
php artisan telegram:heartbeat
```

–í —á–∞—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ **üü¢ –°–ï–†–í–ï–† –†–ê–ë–û–¢–ê–ï–¢ (SERVER UP)**.

---

## 3. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (cron)

Heartbeat –∑–∞–≤—è–∑–∞–Ω –Ω–∞ —Ç–æ—Ç –∂–µ Laravel Scheduler, —á—Ç–æ –∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
* * * * * cd /var/www/trading-bot && php artisan schedule:run >> /dev/null 2>&1
```

–í `routes/console.php` —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

```php
Schedule::command('telegram:heartbeat')->everyFiveMinutes();
```

–¢–æ –µ—Å—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–º cron heartbeat –±—É–¥–µ—Ç —É—Ö–æ–¥–∏—Ç—å –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## 4. –ï—Å–ª–∏ TELEGRAM_HEALTH_CHAT_ID –Ω–µ –∑–∞–¥–∞–Ω

- `telegram:heartbeat` –ø—Ä–æ—Å—Ç–æ **–Ω–∏—á–µ–≥–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç** –∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ.
- –û–±—ã—á–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—Å–¥–µ–ª–∫–∏, –±–æ—Ç—ã –∏ —Ç.–¥.) –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è.

---

## 5. –ò—Ç–æ–≥

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|------------|
| `TELEGRAM_BOT_TOKEN` | –¢–æ–∫–µ–Ω –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞ (–¥–ª—è —Å–¥–µ–ª–æ–∫, –±–æ—Ç–æ–≤, –æ—à–∏–±–æ–∫) |
| `TELEGRAM_CHAT_ID` | –ß–∞—Ç –¥–ª—è —Å–¥–µ–ª–æ–∫, –±–æ—Ç–æ–≤, –æ—à–∏–±–æ–∫ |
| `TELEGRAM_HEALTH_BOT_TOKEN` | –¢–æ–∫–µ–Ω health-–±–æ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–æ–∫–µ–Ω) |
| `TELEGRAM_HEALTH_CHAT_ID` | –û—Ç–¥–µ–ª—å–Ω—ã–π —á–∞—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è ¬´—Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç¬ª |

–î–≤–∞ —Ä–∞–∑–Ω—ã—Ö —á–∞—Ç–∞ ‚Äî –≤—ã —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç–µ: –≤ –æ–¥–Ω–æ–º —Ç–æ—Ä–≥–æ–≤–ª—è, –≤ –¥—Ä—É–≥–æ–º —Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç ¬´—Å–µ—Ä–≤–µ—Ä –∂–∏–≤¬ª. –ù–µ—Ç heartbeat ‚Äî –ø–æ–≤–æ–¥ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –∏ cron.
